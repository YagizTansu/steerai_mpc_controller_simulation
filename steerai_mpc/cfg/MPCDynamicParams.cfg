#!/usr/bin/env python3
"""
Dynamic Reconfigure configuration for MPC Controller
Allows runtime tuning of critical parameters via rqt_reconfigure GUI
"""

PACKAGE = "steerai_mpc"

from dynamic_reconfigure.parameter_generator_catkin import *

gen = ParameterGenerator()

# Cost Function Weights - Most commonly tuned parameters
gen.add("weight_position", double_t, 0, 
        "Position error weight (cross-track error)", 
        4.0, 0.0, 100.0)

gen.add("weight_heading", double_t, 0, 
        "Heading error weight (orientation alignment)", 
        15.0, 0.0, 100.0)

gen.add("weight_velocity", double_t, 0, 
        "Velocity error weight (speed tracking)", 
        1.0, 0.0, 100.0)

gen.add("weight_steering_smooth", double_t, 0, 
        "Steering smoothness weight (reduce jerky steering)", 
        5.0, 0.0, 100.0)

gen.add("weight_acceleration_smooth", double_t, 0, 
        "Acceleration smoothness weight (reduce jerky speed changes)", 
        0.1, 0.0, 100.0)

gen.add("weight_cte", double_t, 0, 
        "Cross Track Error weight (harder constraint)", 
        1000.0, 0.0, 5000.0)

# Target Speed - Useful to adjust during testing
gen.add("target_speed", double_t, 0, 
        "Target cruise speed (m/s)", 
        5.556, 0.1, 8.0)  # Default: 20 km/h

# Goal Tolerance - May need adjustment for different scenarios
gen.add("goal_tolerance", double_t, 0, 
        "Distance to goal where vehicle stops (m)", 
        0.5, 0.1, 5.0)

exit(gen.generate(PACKAGE, "mpc_controller", "MPCDynamicParams"))
